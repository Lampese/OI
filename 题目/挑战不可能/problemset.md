# 挑战不可能大赛

- 这套题目当中充斥着近乎不可能的挑战和送分题。
- 你可以做的就只是卡常、减枝、优化。
- 六道题中有五道常规题，一道交互题。
- 题目多？其实都很水的啦…考个一上午一下午的准够…
- 如果出题人咕咕咕没有出数据，那只能由出题人人工读代码评分了。
- 本次比赛开启 O2 优化。

## 不可能的路(way.cpp)

####题目背景

zzz 最近迷上了写最短路，特别是对于单源最短路。

但是众所周知，Syx 超级喜欢出毫无意义的变态题卡人，于是她想让你写一道单源最短路。

#### 题目描述

给定一个 $n$ 个点，$m$ 条有向边的带非负权图，请你计算从 $s$ 出发，到每个点的距离。

数据保证你能从 $s$ 出发到任意点。

####输入格式

第一行为三个正整数 $n,m,s$。

第二行起$m$行，每行三个非负整数  $u_i$ ，$v_i$，$w_i$，表示从$u_i$到$v_i$有一条权值为$w_i$的有向边。

#### 输出格式

输出一行 $n$ 个空格分隔的非负整数，表示 $s$ 到每个点的距离。

#### 输入输出样例

##### 输入#1

```
4 6 1
1 2 2
2 3 2
2 4 1
1 3 5
3 4 3
1 4 4
```

##### 输出#1

```
0 2 4 3
```

#### 数据范围及约定

$1<n<10^7$

$1<m<2*10^7$

$1<\Sigma w_i<2*10^7$

## 不可能的大暴力(baoli.cpp)

#### 题目背景

zzz喜欢打大暴力。

但是 dp 就是暴力，zzz 只喜欢在 dp 题打暴力，所以他 dp 题总是满分。

于是看到这道送分题，zzz 用了很多暴力算法（比如 LCT，Splay，树链剖分）就轻轻松松 AC 了本题。

可是明显有更简单的解法，你可以做出来吗？

#### 题目描述

给定由$n$个点形成的森林，一开始每个点自成一颗树，每个点有一个点权，现有$m$次操作，操作有两种类型：

1、给定 $ x$ ，$y$ ，将节点 $x $ 接在 $y $ 下面，作为 $y$ 的儿子，保证 $x$ 一定为所在树的根节点

2、给定 $x$ ，求 $x$ 到当前所在树的根节点的路径的点权异或和(包括自己和根节点)

#### 输入格式

第一行两个整数 $n$ ,$ m$ ，表示有 $n$ 个点 $m$ 个操作

第二行 $n $ 个整数，第 $i$ 个整数表示第 $i $ 个点的权值。

接下来 $m $ 行，每行为 1 $x$ $y$ 或 2 $x$。

如果是 1 $a$ $b$ 表示这是一个操作 1，保证 $a$!=$b$，意义见题目内容。

如果是 2 $a$ 表示这是一个操作 2，意义见题目内容。

#### 输出格式

对于每个操作2，输出一行，表示从 $ x$ 到根节点路径上所有点的权值的异或和。

#### 输入输出样例

##### 输入#1

```
5 6
3 4 1 2 5
2 3
1 1 2
2 1
1 4 3
1 3 1
2 4
```

##### 输出#1

```1
1
7
4
```

##### 输入#2

```
7 8
3 4 1 2 5 6 7
2 3
1 1 2
2 1
1 4 3
1 3 1
2 4
1 2 5
2 4
```

##### 输出#2

```
1
7
4
1
```

#### 数据范围及约定

对于40%的数据，1$\le n,m\le$1000

对于90%的数据，$1\le n \le 100000,1\le m\le 200000$

对于100%的数据，$1\le n\le 300000,1\le m\le 500000$

所有点权均为正整数且在 int 范围内。

## 不可能的规划(city.cpp)

#### 题目背景

zzz 去干了城市规划师，但是他想让你写个程序帮他规划城市。

#### 题目描述

$A$ 国有 $n$ 座城市，你计划在城市之间建立若干条双向道路，现在有 $m$ 条道路可以被建设，每条道路都有自己的修建代价。

除此之外，你还可以建立最多 $k$ 条双向空中航线，每条航线可以连接任意两座城市，每条航线的代价固定为 $z$。

你希望花费最小的代价，使得整个国家的城市之间能两两互相到达，求最小代价是多少。

#### 输入格式

第一行四个整数，分别是 $n,m,k,z$

接下来$m$行，每行三个整数，$u,v,w$ 表示一条备选道路连接的两座城市和代价。

#### 输出格式

输出一行一个整数，表示最小代价。

#### 输入输出样例

##### 输入#1

```
3 3 1 1
1 2 2
2 3 2
1 3 1
```

##### 输出##1

```
2
```

##### 输入#2

```
3 3 2 2
1 2 1
2 3 1
1 3 3
```

##### 输出#2

```
2
```

#### 数据范围及约定

$30pts$：$k\le n\le 20, m\le 20, 0\le w,z\le 100$

$20pts$：$k=0,n\le 2\times 10^5, m\le 2\times 10^5, 0\le w,z\le 10^4$

$50pts$：$k\le n\le 2\times 10^5, m\le 2\times 10^5, 0\le w,z\le 10^4$

##不可能的花园(garden.cpp)



#### 题目背景

```
我们带着一路上所有的经历，去面对一群新的人，去构筑一片新的繁华。
													--qingdkj《再见。回头看。》
```

#### 题目描述

$zzz$ 最近迷上了种花，于是以他的家境他买了一个超级带劲大花园。

于是，$zzz$ 这样说：

花园里有 $n$ 株植物，从 $1-n$ 编号。

每株植物里面都有一些孢子团，孢子团总共有 $m$ 个，从 $1-m$ 编号。

每个孢子团里面都有一些孢子，每个孢子都具有质量，孢子总共有 $k$ 个，从 $1-k$ 编号。

而初始的 $m=0,k=0$，$n$ 给出。

孢子团的质量是该团内所有孢子的质量和，而植物的质量是该植物内所有孢子团的质量和。

现在 $zzz$ 要你奖励他一个自动管理系统，要求完成以下操作：

- 1 输出所有植物的质量

- 2 $ \ p \ $ 输出编号为 $p$ 的植物的质量

- 3 $ \ p \ $ $ \ l$ $ \ w_1-w_l \ $在编号为 $p$ 的植物内插入一个含有 $l$ 个孢子的孢子团，孢子的质量为长度为 $l$ 的数列(上文中的 $w$)。该孢子团变为 $m+1$ 号孢子团，其中的孢子变为 $k+1$ 到 $k+l$ 号孢子。

- 4 $ \ b \ $ $ \ l\ $ $ \ w_1-w_l \ $在编号为$b$的孢子团所属的植株中插入一个新的孢子团，$l$ 与 $w$ 同上。

- 5  删除编号最后的孢子团。

- 6 $ \  b \ $ $ \ w \ $在编号为 $b$ 的孢子团中插入一个质量为 $w$ 的孢子，作为第 $k+1$ 个孢子。

- 7 $ \ g \ $ $ \ w \ $在编号为 $g$ 的孢子所属的孢子团中插入一个质量为 $w$ 的孢子。

- 8 删除编号最后的的孢子。

- 9 $ \ p \ $查询编号为 $p$ 的植株内的孢子数量。

  注意在每次操作后，$n,m,k$ 的值对应延展，比如目前有 $m+1$ 个孢子团时，在操作结束时下次操作开始时 $m_{new}=m_{old}+1$。

#### 输入格式

第一行输入 $n$ 和 $opt$，分别代表植株数量和命令数量

接下来的 $opt$ 行，代表每次操作，操作格式见上文。

#### 输出格式

针对询问 $1,2,9$ 输出对应的回答，每次回答之间使用换行分割。

#### 输入输出样例

##### 输入#1

```5 9
5 9
3 2 10 1 2 3 4 5 6 7 8 9 10
1
2 2
4 1 1 1
5
6 1 2
7 1 1
8
9 2
```

##### 输出#1

```
55
55
11
```

#### 数据范围及约定

$n,m$始终$\le 5×10^4$，$0<w\le 10^5$，$\Sigma \ k\le 10^7$。

## 不可能的区间操作(sunlist.cpp)

#### 题目背景

```
她只关心又一颗明亮的星星由她手中升起，即将闪烁在广袤的夜空中。
													--qingdkj《再见。回头看。》
```

#### 题目描述

编写一个不限长度的区间数据结构，支持如下操作：

- 1 $ \ \ l \ \ r  \ \ v \ \ $将 $l -r $ 的元素设置为$v$。
- 2 $ \ \ l \ \ r \ \ $输出 $l-r$ 所有元素的和。
- 3 $ \ \ l \ \ r \ \ $将 $l-r$ 的元素按照从小到大排序。
- 4 $ \ \ l \ \ r \ \ v \ \ $将 $l-r$ 的元素全部加上$v$。

由于不可抗力,$2,3,4$ 操作会变得很少,$1$ 操作会变得很多。

#### 输入格式

第一行输入一个正整数 $m$，代表操作个数。

接下来 $m$ 行按题目描述输入对应的操作。

#### 输出格式

针对每个 $2$ 操作输出对应答案，使用换行间隔。

#### 输入输出样例

##### 输入#1

```
7
1 100 1
2 1 100
1 100 2
2 1 100
1 3 1
3 1 100
2 1 3
```

##### 输出#1

```
100
200
3
```

#### 数据范围及约定

$1$ 操作非常多。

$0<m\le 10^5$

$l,r,v以及 2 的结果均 >0 且在 long long 范围内$

## 不可能的转移(交互 move)

#### 题目场景

[本题下发文件下载](https://Torrekie.com/possible/zzz.zip)

zzz 写代码的时候遇到了一个问题，看他的代码解决问题。

#### 题目提交

认真阅读下发文件中的 zzz.cpp 和 zzz.h。

重写 zzz.h 中的 Function 函数，然后提交 zzz.h 作为答案。

#### 题目通过要求

在不超时的情况下帮助 zzz 把程序跑完。
